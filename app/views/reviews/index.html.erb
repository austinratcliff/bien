<% content_for :page_title, "Reviews" %>

<nav class="filters">
  <%= active_link_to "All reviews", root_path, active: { price: nil, cuisine: nil, location: nil } %>

  <div>
    <%= active_link_to "$", root_path(price: 1, cuisine: @cuisine, location: @location), active: { price: 1 } %>
    <%= active_link_to "$$", root_path(price: 2, cuisine: @cuisine, location: @location), active: { price: 2 } %>
    <%= active_link_to "$$$", root_path(price: 3, cuisine: @cuisine, location: @location), active: { price: 3 } %>
  </div>

  <div>
    <%= active_link_to "Italian", root_path(cuisine: "Italian", price: @price, location: @location), active: { cuisine: "Italian" } %>
    <%= active_link_to "Vegetarian", root_path(cuisine: "Vegetarian", price: @price, location: @location), active: { cuisine: "Vegetarian" } %>
  </div>

  <form action="/">
    <input type="text" name="location" placeholder="Search location" value="<%= @location %>" />
    <input type="hidden" name="price" value="<%= @price %>" />
    <input type="hidden" name="cuisine" value="<%= @cuisine %>" />
  </form>
</nav>

<% @reviews.each do |review| %>
  <div class="review">
    <%= link_to review_path(review) do %>
      <h2><%= review.title %></h2>
      <p>
        <%= review.cuisine %> â€”
        <%= pluralize review.comments.count, "comment" %>
      </p>
    <% end %>
  </div>
<% end %>
